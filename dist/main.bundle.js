(()=>{"use strict";var t={887:(t,e,r)=>{r.r(e),r.d(e,{glMatrix:()=>a,mat2:()=>n,mat2d:()=>i,mat3:()=>s,mat4:()=>o,quat:()=>c,quat2:()=>l,vec2:()=>f,vec3:()=>u,vec4:()=>h});var a={};r.r(a),r.d(a,{ARRAY_TYPE:()=>m,EPSILON:()=>d,RANDOM:()=>M,equals:()=>g,setMatrixArrayType:()=>v,toRadian:()=>b});var n={};r.r(n),r.d(n,{LDU:()=>U,add:()=>F,adjoint:()=>j,clone:()=>x,copy:()=>_,create:()=>y,determinant:()=>O,equals:()=>I,exactEquals:()=>V,frob:()=>E,fromRotation:()=>B,fromScaling:()=>L,fromValues:()=>R,identity:()=>w,invert:()=>A,mul:()=>X,multiply:()=>T,multiplyScalar:()=>N,multiplyScalarAndAdd:()=>Y,rotate:()=>q,scale:()=>S,set:()=>D,str:()=>G,sub:()=>z,subtract:()=>C,transpose:()=>P});var i={};r.r(i),r.d(i,{add:()=>ht,clone:()=>Q,copy:()=>k,create:()=>Z,determinant:()=>$,equals:()=>mt,exactEquals:()=>dt,frob:()=>ut,fromRotation:()=>nt,fromScaling:()=>it,fromTranslation:()=>st,fromValues:()=>W,identity:()=>H,invert:()=>K,mul:()=>Mt,multiply:()=>tt,multiplyScalar:()=>lt,multiplyScalarAndAdd:()=>ft,rotate:()=>et,scale:()=>rt,set:()=>J,str:()=>ot,sub:()=>vt,subtract:()=>ct,translate:()=>at});var s={};r.r(s),r.d(s,{add:()=>It,adjoint:()=>Pt,clone:()=>gt,copy:()=>yt,create:()=>pt,determinant:()=>At,equals:()=>Zt,exactEquals:()=>zt,frob:()=>Vt,fromMat2d:()=>Gt,fromMat4:()=>bt,fromQuat:()=>Et,fromRotation:()=>Bt,fromScaling:()=>Lt,fromTranslation:()=>St,fromValues:()=>xt,identity:()=>wt,invert:()=>Dt,mul:()=>Qt,multiply:()=>jt,multiplyScalar:()=>Yt,multiplyScalarAndAdd:()=>Xt,normalFromMat4:()=>Ut,projection:()=>Ft,rotate:()=>Tt,scale:()=>qt,set:()=>_t,str:()=>Ct,sub:()=>kt,subtract:()=>Nt,translate:()=>Ot,transpose:()=>Rt});var o={};r.r(o),r.d(o,{add:()=>Fe,adjoint:()=>ae,clone:()=>Wt,copy:()=>Jt,create:()=>Ht,determinant:()=>ne,equals:()=>Ye,exactEquals:()=>Ne,frob:()=>Ue,fromQuat:()=>De,fromQuat2:()=>ge,fromRotation:()=>me,fromRotationTranslation:()=>be,fromRotationTranslationScale:()=>we,fromRotationTranslationScaleOrigin:()=>Re,fromScaling:()=>de,fromTranslation:()=>fe,fromValues:()=>Kt,fromXRotation:()=>Me,fromYRotation:()=>ve,fromZRotation:()=>pe,frustum:()=>Pe,getRotation:()=>_e,getScaling:()=>xe,getTranslation:()=>ye,identity:()=>te,invert:()=>re,lookAt:()=>Le,mul:()=>Xe,multiply:()=>ie,multiplyScalar:()=>Ve,multiplyScalarAndAdd:()=>Ie,ortho:()=>Se,orthoNO:()=>qe,orthoZO:()=>Be,perspective:()=>je,perspectiveFromFieldOfView:()=>Te,perspectiveNO:()=>Ae,perspectiveZO:()=>Oe,rotate:()=>ue,rotateX:()=>he,rotateY:()=>ce,rotateZ:()=>le,scale:()=>oe,set:()=>$t,str:()=>Ee,sub:()=>ze,subtract:()=>Ce,targetTo:()=>Ge,translate:()=>se,transpose:()=>ee});var u={};r.r(u),r.d(u,{add:()=>Ke,angle:()=>Ar,bezier:()=>gr,ceil:()=>rr,clone:()=>Qe,copy:()=>We,create:()=>Ze,cross:()=>vr,dist:()=>Er,distance:()=>hr,div:()=>Gr,divide:()=>er,dot:()=>Mr,equals:()=>qr,exactEquals:()=>Tr,floor:()=>ar,forEach:()=>Vr,fromValues:()=>He,hermite:()=>br,inverse:()=>dr,len:()=>Fr,length:()=>ke,lerp:()=>pr,max:()=>ir,min:()=>nr,mul:()=>Lr,multiply:()=>tr,negate:()=>fr,normalize:()=>mr,random:()=>yr,rotateX:()=>Rr,rotateY:()=>Dr,rotateZ:()=>Pr,round:()=>sr,scale:()=>or,scaleAndAdd:()=>ur,set:()=>Je,sqrDist:()=>Ur,sqrLen:()=>Cr,squaredDistance:()=>cr,squaredLength:()=>lr,str:()=>Or,sub:()=>Br,subtract:()=>$e,transformMat3:()=>_r,transformMat4:()=>xr,transformQuat:()=>wr,zero:()=>jr});var h={};r.r(h),r.d(h,{add:()=>Zr,ceil:()=>Wr,clone:()=>Nr,copy:()=>Xr,create:()=>Ir,cross:()=>la,dist:()=>wa,distance:()=>aa,div:()=>_a,divide:()=>Hr,dot:()=>ca,equals:()=>ga,exactEquals:()=>ba,floor:()=>Jr,forEach:()=>Aa,fromValues:()=>Yr,inverse:()=>ua,len:()=>Da,length:()=>ia,lerp:()=>fa,max:()=>$r,min:()=>Kr,mul:()=>xa,multiply:()=>kr,negate:()=>oa,normalize:()=>ha,random:()=>da,round:()=>ta,scale:()=>ea,scaleAndAdd:()=>ra,set:()=>zr,sqrDist:()=>Ra,sqrLen:()=>Pa,squaredDistance:()=>na,squaredLength:()=>sa,str:()=>pa,sub:()=>ya,subtract:()=>Qr,transformMat4:()=>ma,transformQuat:()=>Ma,zero:()=>va});var c={};r.r(c),r.d(c,{add:()=>nn,calculateW:()=>Ua,clone:()=>tn,conjugate:()=>Xa,copy:()=>rn,create:()=>ja,dot:()=>un,equals:()=>vn,exactEquals:()=>Mn,exp:()=>Fa,fromEuler:()=>Za,fromMat3:()=>za,fromValues:()=>en,getAngle:()=>Sa,getAxisAngle:()=>qa,identity:()=>Oa,invert:()=>Ya,len:()=>ln,length:()=>cn,lerp:()=>hn,ln:()=>Ca,mul:()=>sn,multiply:()=>Ba,normalize:()=>mn,pow:()=>Va,random:()=>Na,rotateX:()=>La,rotateY:()=>Ga,rotateZ:()=>Ea,rotationTo:()=>pn,scale:()=>on,set:()=>an,setAxes:()=>gn,setAxisAngle:()=>Ta,slerp:()=>Ia,sqlerp:()=>bn,sqrLen:()=>dn,squaredLength:()=>fn,str:()=>Qa});var l={};r.r(l),r.d(l,{add:()=>Yn,clone:()=>xn,conjugate:()=>Wn,copy:()=>jn,create:()=>yn,dot:()=>Qn,equals:()=>ni,exactEquals:()=>ai,fromMat4:()=>An,fromRotation:()=>Pn,fromRotationTranslation:()=>Rn,fromRotationTranslationValues:()=>wn,fromTranslation:()=>Dn,fromValues:()=>_n,getDual:()=>Sn,getReal:()=>qn,getTranslation:()=>Gn,identity:()=>On,invert:()=>Hn,len:()=>Kn,length:()=>Jn,lerp:()=>kn,mul:()=>zn,multiply:()=>Xn,normalize:()=>ei,rotateAroundAxis:()=>Nn,rotateByQuatAppend:()=>Vn,rotateByQuatPrepend:()=>In,rotateX:()=>Un,rotateY:()=>Fn,rotateZ:()=>Cn,scale:()=>Zn,set:()=>Tn,setDual:()=>Ln,setReal:()=>Bn,sqrLen:()=>ti,squaredLength:()=>$n,str:()=>ri,translate:()=>En});var f={};r.r(f),r.d(f,{add:()=>ci,angle:()=>Ui,ceil:()=>mi,clone:()=>si,copy:()=>ui,create:()=>ii,cross:()=>Oi,dist:()=>Zi,distance:()=>xi,div:()=>zi,divide:()=>di,dot:()=>ji,equals:()=>Ii,exactEquals:()=>Vi,floor:()=>Mi,forEach:()=>Hi,fromValues:()=>oi,inverse:()=>Pi,len:()=>Ni,length:()=>wi,lerp:()=>Ti,max:()=>pi,min:()=>vi,mul:()=>Xi,multiply:()=>fi,negate:()=>Di,normalize:()=>Ai,random:()=>qi,rotate:()=>Ei,round:()=>bi,scale:()=>gi,scaleAndAdd:()=>yi,set:()=>hi,sqrDist:()=>Qi,sqrLen:()=>ki,squaredDistance:()=>_i,squaredLength:()=>Ri,str:()=>Ci,sub:()=>Yi,subtract:()=>li,transformMat2:()=>Si,transformMat2d:()=>Bi,transformMat3:()=>Li,transformMat4:()=>Gi,zero:()=>Fi});var d=1e-6,m="undefined"!=typeof Float32Array?Float32Array:Array,M=Math.random;function v(t){m=t}var p=Math.PI/180;function b(t){return t*p}function g(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function y(){var t=new m(4);return m!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function x(t){var e=new m(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function w(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function R(t,e,r,a){var n=new m(4);return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n}function D(t,e,r,a,n){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t}function P(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function A(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=r*i-n*a;return s?(s=1/s,t[0]=i*s,t[1]=-a*s,t[2]=-n*s,t[3]=r*s,t):null}function j(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function O(t){return t[0]*t[3]-t[2]*t[1]}function T(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=a*o+i*u,t[1]=n*o+s*u,t[2]=a*h+i*c,t[3]=n*h+s*c,t}function q(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=a*u+i*o,t[1]=n*u+s*o,t[2]=a*-o+i*u,t[3]=n*-o+s*u,t}function S(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=r[0],u=r[1];return t[0]=a*o,t[1]=n*o,t[2]=i*u,t[3]=s*u,t}function B(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t}function L(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function G(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function E(t){return Math.hypot(t[0],t[1],t[2],t[3])}function U(t,e,r,a){return t[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-t[2]*r[1],[t,e,r]}function F(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function C(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function I(t,e){var r=t[0],a=t[1],n=t[2],i=t[3],s=e[0],o=e[1],u=e[2],h=e[3];return Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-o)<=d*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))}function N(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Y(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var X=T,z=C;function Z(){var t=new m(6);return m!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Q(t){var e=new m(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function k(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function H(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function W(t,e,r,a,n,i){var s=new m(6);return s[0]=t,s[1]=e,s[2]=r,s[3]=a,s[4]=n,s[5]=i,s}function J(t,e,r,a,n,i,s){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=i,t[5]=s,t}function K(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=e[4],o=e[5],u=r*i-a*n;return u?(u=1/u,t[0]=i*u,t[1]=-a*u,t[2]=-n*u,t[3]=r*u,t[4]=(n*o-i*s)*u,t[5]=(a*s-r*o)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=r[0],c=r[1],l=r[2],f=r[3],d=r[4],m=r[5];return t[0]=a*h+i*c,t[1]=n*h+s*c,t[2]=a*l+i*f,t[3]=n*l+s*f,t[4]=a*d+i*m+o,t[5]=n*d+s*m+u,t}function et(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=Math.sin(r),c=Math.cos(r);return t[0]=a*c+i*h,t[1]=n*c+s*h,t[2]=a*-h+i*c,t[3]=n*-h+s*c,t[4]=o,t[5]=u,t}function rt(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=r[0],c=r[1];return t[0]=a*h,t[1]=n*h,t[2]=i*c,t[3]=s*c,t[4]=o,t[5]=u,t}function at(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=r[0],c=r[1];return t[0]=a,t[1]=n,t[2]=i,t[3]=s,t[4]=a*h+i*c+o,t[5]=n*h+s*c+u,t}function nt(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t[4]=0,t[5]=0,t}function it(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function st(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ot(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ht(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function ct(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function lt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function ft(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function mt(t,e){var r=t[0],a=t[1],n=t[2],i=t[3],s=t[4],o=t[5],u=e[0],h=e[1],c=e[2],l=e[3],f=e[4],m=e[5];return Math.abs(r-u)<=d*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-h)<=d*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(n-c)<=d*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-f)<=d*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))}var Mt=tt,vt=ct;function pt(){var t=new m(9);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){var e=new m(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function xt(t,e,r,a,n,i,s,o,u){var h=new m(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=a,h[4]=n,h[5]=i,h[6]=s,h[7]=o,h[8]=u,h}function _t(t,e,r,a,n,i,s,o,u,h){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=i,t[5]=s,t[6]=o,t[7]=u,t[8]=h,t}function wt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Rt(t,e){if(t===e){var r=e[1],a=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=a,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Dt(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],l=c*s-o*h,f=-c*i+o*u,d=h*i-s*u,m=r*l+a*f+n*d;return m?(m=1/m,t[0]=l*m,t[1]=(-c*a+n*h)*m,t[2]=(o*a-n*s)*m,t[3]=f*m,t[4]=(c*r-n*u)*m,t[5]=(-o*r+n*i)*m,t[6]=d*m,t[7]=(-h*r+a*u)*m,t[8]=(s*r-a*i)*m,t):null}function Pt(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8];return t[0]=s*c-o*h,t[1]=n*h-a*c,t[2]=a*o-n*s,t[3]=o*u-i*c,t[4]=r*c-n*u,t[5]=n*i-r*o,t[6]=i*h-s*u,t[7]=a*u-r*h,t[8]=r*s-a*i,t}function At(t){var e=t[0],r=t[1],a=t[2],n=t[3],i=t[4],s=t[5],o=t[6],u=t[7],h=t[8];return e*(h*i-s*u)+r*(-h*n+s*o)+a*(u*n-i*o)}function jt(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=r[0],d=r[1],m=r[2],M=r[3],v=r[4],p=r[5],b=r[6],g=r[7],y=r[8];return t[0]=f*a+d*s+m*h,t[1]=f*n+d*o+m*c,t[2]=f*i+d*u+m*l,t[3]=M*a+v*s+p*h,t[4]=M*n+v*o+p*c,t[5]=M*i+v*u+p*l,t[6]=b*a+g*s+y*h,t[7]=b*n+g*o+y*c,t[8]=b*i+g*u+y*l,t}function Ot(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=r[0],d=r[1];return t[0]=a,t[1]=n,t[2]=i,t[3]=s,t[4]=o,t[5]=u,t[6]=f*a+d*s+h,t[7]=f*n+d*o+c,t[8]=f*i+d*u+l,t}function Tt(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=Math.sin(r),d=Math.cos(r);return t[0]=d*a+f*s,t[1]=d*n+f*o,t[2]=d*i+f*u,t[3]=d*s-f*a,t[4]=d*o-f*n,t[5]=d*u-f*i,t[6]=h,t[7]=c,t[8]=l,t}function qt(t,e,r){var a=r[0],n=r[1];return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function St(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Bt(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=0,t[3]=-r,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Lt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Et(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=r+r,o=a+a,u=n+n,h=r*s,c=a*s,l=a*o,f=n*s,d=n*o,m=n*u,M=i*s,v=i*o,p=i*u;return t[0]=1-l-m,t[3]=c-p,t[6]=f+v,t[1]=c+p,t[4]=1-h-m,t[7]=d-M,t[2]=f-v,t[5]=d+M,t[8]=1-h-l,t}function Ut(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],l=e[9],f=e[10],d=e[11],m=e[12],M=e[13],v=e[14],p=e[15],b=r*o-a*s,g=r*u-n*s,y=r*h-i*s,x=a*u-n*o,_=a*h-i*o,w=n*h-i*u,R=c*M-l*m,D=c*v-f*m,P=c*p-d*m,A=l*v-f*M,j=l*p-d*M,O=f*p-d*v,T=b*O-g*j+y*A+x*P-_*D+w*R;return T?(T=1/T,t[0]=(o*O-u*j+h*A)*T,t[1]=(u*P-s*O-h*D)*T,t[2]=(s*j-o*P+h*R)*T,t[3]=(n*j-a*O-i*A)*T,t[4]=(r*O-n*P+i*D)*T,t[5]=(a*P-r*j-i*R)*T,t[6]=(M*w-v*_+p*x)*T,t[7]=(v*y-m*w-p*g)*T,t[8]=(m*_-M*y+p*b)*T,t):null}function Ft(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ct(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Vt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function It(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Nt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function Yt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Xt(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t[6]=e[6]+r[6]*a,t[7]=e[7]+r[7]*a,t[8]=e[8]+r[8]*a,t}function zt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Zt(t,e){var r=t[0],a=t[1],n=t[2],i=t[3],s=t[4],o=t[5],u=t[6],h=t[7],c=t[8],l=e[0],f=e[1],m=e[2],M=e[3],v=e[4],p=e[5],b=e[6],g=e[7],y=e[8];return Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=d*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(n-m)<=d*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(i-M)<=d*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(s-v)<=d*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(u-b)<=d*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(h-g)<=d*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(c-y)<=d*Math.max(1,Math.abs(c),Math.abs(y))}var Qt=jt,kt=Nt;function Ht(){var t=new m(16);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Wt(t){var e=new m(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Jt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kt(t,e,r,a,n,i,s,o,u,h,c,l,f,d,M,v){var p=new m(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=a,p[4]=n,p[5]=i,p[6]=s,p[7]=o,p[8]=u,p[9]=h,p[10]=c,p[11]=l,p[12]=f,p[13]=d,p[14]=M,p[15]=v,p}function $t(t,e,r,a,n,i,s,o,u,h,c,l,f,d,m,M,v){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=i,t[5]=s,t[6]=o,t[7]=u,t[8]=h,t[9]=c,t[10]=l,t[11]=f,t[12]=d,t[13]=m,t[14]=M,t[15]=v,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],a=e[2],n=e[3],i=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=i,t[11]=e[14],t[12]=n,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],l=e[9],f=e[10],d=e[11],m=e[12],M=e[13],v=e[14],p=e[15],b=r*o-a*s,g=r*u-n*s,y=r*h-i*s,x=a*u-n*o,_=a*h-i*o,w=n*h-i*u,R=c*M-l*m,D=c*v-f*m,P=c*p-d*m,A=l*v-f*M,j=l*p-d*M,O=f*p-d*v,T=b*O-g*j+y*A+x*P-_*D+w*R;return T?(T=1/T,t[0]=(o*O-u*j+h*A)*T,t[1]=(n*j-a*O-i*A)*T,t[2]=(M*w-v*_+p*x)*T,t[3]=(f*_-l*w-d*x)*T,t[4]=(u*P-s*O-h*D)*T,t[5]=(r*O-n*P+i*D)*T,t[6]=(v*y-m*w-p*g)*T,t[7]=(c*w-f*y+d*g)*T,t[8]=(s*j-o*P+h*R)*T,t[9]=(a*P-r*j-i*R)*T,t[10]=(m*_-M*y+p*b)*T,t[11]=(l*y-c*_-d*b)*T,t[12]=(o*D-s*A-u*R)*T,t[13]=(r*A-a*D+n*R)*T,t[14]=(M*g-m*x-v*b)*T,t[15]=(c*x-l*g+f*b)*T,t):null}function ae(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=e[4],o=e[5],u=e[6],h=e[7],c=e[8],l=e[9],f=e[10],d=e[11],m=e[12],M=e[13],v=e[14],p=e[15];return t[0]=o*(f*p-d*v)-l*(u*p-h*v)+M*(u*d-h*f),t[1]=-(a*(f*p-d*v)-l*(n*p-i*v)+M*(n*d-i*f)),t[2]=a*(u*p-h*v)-o*(n*p-i*v)+M*(n*h-i*u),t[3]=-(a*(u*d-h*f)-o*(n*d-i*f)+l*(n*h-i*u)),t[4]=-(s*(f*p-d*v)-c*(u*p-h*v)+m*(u*d-h*f)),t[5]=r*(f*p-d*v)-c*(n*p-i*v)+m*(n*d-i*f),t[6]=-(r*(u*p-h*v)-s*(n*p-i*v)+m*(n*h-i*u)),t[7]=r*(u*d-h*f)-s*(n*d-i*f)+c*(n*h-i*u),t[8]=s*(l*p-d*M)-c*(o*p-h*M)+m*(o*d-h*l),t[9]=-(r*(l*p-d*M)-c*(a*p-i*M)+m*(a*d-i*l)),t[10]=r*(o*p-h*M)-s*(a*p-i*M)+m*(a*h-i*o),t[11]=-(r*(o*d-h*l)-s*(a*d-i*l)+c*(a*h-i*o)),t[12]=-(s*(l*v-f*M)-c*(o*v-u*M)+m*(o*f-u*l)),t[13]=r*(l*v-f*M)-c*(a*v-n*M)+m*(a*f-n*l),t[14]=-(r*(o*v-u*M)-s*(a*v-n*M)+m*(a*u-n*o)),t[15]=r*(o*f-u*l)-s*(a*f-n*l)+c*(a*u-n*o),t}function ne(t){var e=t[0],r=t[1],a=t[2],n=t[3],i=t[4],s=t[5],o=t[6],u=t[7],h=t[8],c=t[9],l=t[10],f=t[11],d=t[12],m=t[13],M=t[14],v=t[15];return(e*s-r*i)*(l*v-f*M)-(e*o-a*i)*(c*v-f*m)+(e*u-n*i)*(c*M-l*m)+(r*o-a*s)*(h*v-f*d)-(r*u-n*s)*(h*M-l*d)+(a*u-n*o)*(h*m-c*d)}function ie(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=e[9],d=e[10],m=e[11],M=e[12],v=e[13],p=e[14],b=e[15],g=r[0],y=r[1],x=r[2],_=r[3];return t[0]=g*a+y*o+x*l+_*M,t[1]=g*n+y*u+x*f+_*v,t[2]=g*i+y*h+x*d+_*p,t[3]=g*s+y*c+x*m+_*b,g=r[4],y=r[5],x=r[6],_=r[7],t[4]=g*a+y*o+x*l+_*M,t[5]=g*n+y*u+x*f+_*v,t[6]=g*i+y*h+x*d+_*p,t[7]=g*s+y*c+x*m+_*b,g=r[8],y=r[9],x=r[10],_=r[11],t[8]=g*a+y*o+x*l+_*M,t[9]=g*n+y*u+x*f+_*v,t[10]=g*i+y*h+x*d+_*p,t[11]=g*s+y*c+x*m+_*b,g=r[12],y=r[13],x=r[14],_=r[15],t[12]=g*a+y*o+x*l+_*M,t[13]=g*n+y*u+x*f+_*v,t[14]=g*i+y*h+x*d+_*p,t[15]=g*s+y*c+x*m+_*b,t}function se(t,e,r){var a,n,i,s,o,u,h,c,l,f,d,m,M=r[0],v=r[1],p=r[2];return e===t?(t[12]=e[0]*M+e[4]*v+e[8]*p+e[12],t[13]=e[1]*M+e[5]*v+e[9]*p+e[13],t[14]=e[2]*M+e[6]*v+e[10]*p+e[14],t[15]=e[3]*M+e[7]*v+e[11]*p+e[15]):(a=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=e[9],d=e[10],m=e[11],t[0]=a,t[1]=n,t[2]=i,t[3]=s,t[4]=o,t[5]=u,t[6]=h,t[7]=c,t[8]=l,t[9]=f,t[10]=d,t[11]=m,t[12]=a*M+o*v+l*p+e[12],t[13]=n*M+u*v+f*p+e[13],t[14]=i*M+h*v+d*p+e[14],t[15]=s*M+c*v+m*p+e[15]),t}function oe(t,e,r){var a=r[0],n=r[1],i=r[2];return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,r,a){var n,i,s,o,u,h,c,l,f,m,M,v,p,b,g,y,x,_,w,R,D,P,A,j,O=a[0],T=a[1],q=a[2],S=Math.hypot(O,T,q);return S<d?null:(O*=S=1/S,T*=S,q*=S,n=Math.sin(r),s=1-(i=Math.cos(r)),o=e[0],u=e[1],h=e[2],c=e[3],l=e[4],f=e[5],m=e[6],M=e[7],v=e[8],p=e[9],b=e[10],g=e[11],y=O*O*s+i,x=T*O*s+q*n,_=q*O*s-T*n,w=O*T*s-q*n,R=T*T*s+i,D=q*T*s+O*n,P=O*q*s+T*n,A=T*q*s-O*n,j=q*q*s+i,t[0]=o*y+l*x+v*_,t[1]=u*y+f*x+p*_,t[2]=h*y+m*x+b*_,t[3]=c*y+M*x+g*_,t[4]=o*w+l*R+v*D,t[5]=u*w+f*R+p*D,t[6]=h*w+m*R+b*D,t[7]=c*w+M*R+g*D,t[8]=o*P+l*A+v*j,t[9]=u*P+f*A+p*j,t[10]=h*P+m*A+b*j,t[11]=c*P+M*A+g*j,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function he(t,e,r){var a=Math.sin(r),n=Math.cos(r),i=e[4],s=e[5],o=e[6],u=e[7],h=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*n+h*a,t[5]=s*n+c*a,t[6]=o*n+l*a,t[7]=u*n+f*a,t[8]=h*n-i*a,t[9]=c*n-s*a,t[10]=l*n-o*a,t[11]=f*n-u*a,t}function ce(t,e,r){var a=Math.sin(r),n=Math.cos(r),i=e[0],s=e[1],o=e[2],u=e[3],h=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n-h*a,t[1]=s*n-c*a,t[2]=o*n-l*a,t[3]=u*n-f*a,t[8]=i*a+h*n,t[9]=s*a+c*n,t[10]=o*a+l*n,t[11]=u*a+f*n,t}function le(t,e,r){var a=Math.sin(r),n=Math.cos(r),i=e[0],s=e[1],o=e[2],u=e[3],h=e[4],c=e[5],l=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n+h*a,t[1]=s*n+c*a,t[2]=o*n+l*a,t[3]=u*n+f*a,t[4]=h*n-i*a,t[5]=c*n-s*a,t[6]=l*n-o*a,t[7]=f*n-u*a,t}function fe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e,r){var a,n,i,s=r[0],o=r[1],u=r[2],h=Math.hypot(s,o,u);return h<d?null:(s*=h=1/h,o*=h,u*=h,a=Math.sin(e),i=1-(n=Math.cos(e)),t[0]=s*s*i+n,t[1]=o*s*i+u*a,t[2]=u*s*i-o*a,t[3]=0,t[4]=s*o*i-u*a,t[5]=o*o*i+n,t[6]=u*o*i+s*a,t[7]=0,t[8]=s*u*i+o*a,t[9]=o*u*i-s*a,t[10]=u*u*i+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Me(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function be(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=a+a,u=n+n,h=i+i,c=a*o,l=a*u,f=a*h,d=n*u,m=n*h,M=i*h,v=s*o,p=s*u,b=s*h;return t[0]=1-(d+M),t[1]=l+b,t[2]=f-p,t[3]=0,t[4]=l-b,t[5]=1-(c+M),t[6]=m+v,t[7]=0,t[8]=f+p,t[9]=m-v,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ge(t,e){var r=new m(3),a=-e[0],n=-e[1],i=-e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=a*a+n*n+i*i+s*s;return l>0?(r[0]=2*(o*s+c*a+u*i-h*n)/l,r[1]=2*(u*s+c*n+h*a-o*i)/l,r[2]=2*(h*s+c*i+o*n-u*a)/l):(r[0]=2*(o*s+c*a+u*i-h*n),r[1]=2*(u*s+c*n+h*a-o*i),r[2]=2*(h*s+c*i+o*n-u*a)),be(t,e,r),t}function ye(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function xe(t,e){var r=e[0],a=e[1],n=e[2],i=e[4],s=e[5],o=e[6],u=e[8],h=e[9],c=e[10];return t[0]=Math.hypot(r,a,n),t[1]=Math.hypot(i,s,o),t[2]=Math.hypot(u,h,c),t}function _e(t,e){var r=new m(3);xe(r,e);var a=1/r[0],n=1/r[1],i=1/r[2],s=e[0]*a,o=e[1]*n,u=e[2]*i,h=e[4]*a,c=e[5]*n,l=e[6]*i,f=e[8]*a,d=e[9]*n,M=e[10]*i,v=s+c+M,p=0;return v>0?(p=2*Math.sqrt(v+1),t[3]=.25*p,t[0]=(l-d)/p,t[1]=(f-u)/p,t[2]=(o-h)/p):s>c&&s>M?(p=2*Math.sqrt(1+s-c-M),t[3]=(l-d)/p,t[0]=.25*p,t[1]=(o+h)/p,t[2]=(f+u)/p):c>M?(p=2*Math.sqrt(1+c-s-M),t[3]=(f-u)/p,t[0]=(o+h)/p,t[1]=.25*p,t[2]=(l+d)/p):(p=2*Math.sqrt(1+M-s-c),t[3]=(o-h)/p,t[0]=(f+u)/p,t[1]=(l+d)/p,t[2]=.25*p),t}function we(t,e,r,a){var n=e[0],i=e[1],s=e[2],o=e[3],u=n+n,h=i+i,c=s+s,l=n*u,f=n*h,d=n*c,m=i*h,M=i*c,v=s*c,p=o*u,b=o*h,g=o*c,y=a[0],x=a[1],_=a[2];return t[0]=(1-(m+v))*y,t[1]=(f+g)*y,t[2]=(d-b)*y,t[3]=0,t[4]=(f-g)*x,t[5]=(1-(l+v))*x,t[6]=(M+p)*x,t[7]=0,t[8]=(d+b)*_,t[9]=(M-p)*_,t[10]=(1-(l+m))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Re(t,e,r,a,n){var i=e[0],s=e[1],o=e[2],u=e[3],h=i+i,c=s+s,l=o+o,f=i*h,d=i*c,m=i*l,M=s*c,v=s*l,p=o*l,b=u*h,g=u*c,y=u*l,x=a[0],_=a[1],w=a[2],R=n[0],D=n[1],P=n[2],A=(1-(M+p))*x,j=(d+y)*x,O=(m-g)*x,T=(d-y)*_,q=(1-(f+p))*_,S=(v+b)*_,B=(m+g)*w,L=(v-b)*w,G=(1-(f+M))*w;return t[0]=A,t[1]=j,t[2]=O,t[3]=0,t[4]=T,t[5]=q,t[6]=S,t[7]=0,t[8]=B,t[9]=L,t[10]=G,t[11]=0,t[12]=r[0]+R-(A*R+T*D+B*P),t[13]=r[1]+D-(j*R+q*D+L*P),t[14]=r[2]+P-(O*R+S*D+G*P),t[15]=1,t}function De(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=r+r,o=a+a,u=n+n,h=r*s,c=a*s,l=a*o,f=n*s,d=n*o,m=n*u,M=i*s,v=i*o,p=i*u;return t[0]=1-l-m,t[1]=c+p,t[2]=f-v,t[3]=0,t[4]=c-p,t[5]=1-h-m,t[6]=d+M,t[7]=0,t[8]=f+v,t[9]=d-M,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pe(t,e,r,a,n,i,s){var o=1/(r-e),u=1/(n-a),h=1/(i-s);return t[0]=2*i*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(n+a)*u,t[10]=(s+i)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i*2*h,t[15]=0,t}function Ae(t,e,r,a,n){var i,s=1/Math.tan(e/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(i=1/(a-n),t[10]=(n+a)*i,t[14]=2*n*a*i):(t[10]=-1,t[14]=-2*a),t}var je=Ae;function Oe(t,e,r,a,n){var i,s=1/Math.tan(e/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(i=1/(a-n),t[10]=n*i,t[14]=n*a*i):(t[10]=-1,t[14]=-a),t}function Te(t,e,r,a){var n=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+o),h=2/(n+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(s-o)*u*.5,t[9]=(n-i)*h*.5,t[10]=a/(r-a),t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r/(r-a),t[15]=0,t}function qe(t,e,r,a,n,i,s){var o=1/(e-r),u=1/(a-n),h=1/(i-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*o,t[13]=(n+a)*u,t[14]=(s+i)*h,t[15]=1,t}var Se=qe;function Be(t,e,r,a,n,i,s){var o=1/(e-r),u=1/(a-n),h=1/(i-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(e+r)*o,t[13]=(n+a)*u,t[14]=i*h,t[15]=1,t}function Le(t,e,r,a){var n,i,s,o,u,h,c,l,f,m,M=e[0],v=e[1],p=e[2],b=a[0],g=a[1],y=a[2],x=r[0],_=r[1],w=r[2];return Math.abs(M-x)<d&&Math.abs(v-_)<d&&Math.abs(p-w)<d?te(t):(c=M-x,l=v-_,f=p-w,n=g*(f*=m=1/Math.hypot(c,l,f))-y*(l*=m),i=y*(c*=m)-b*f,s=b*l-g*c,(m=Math.hypot(n,i,s))?(n*=m=1/m,i*=m,s*=m):(n=0,i=0,s=0),o=l*s-f*i,u=f*n-c*s,h=c*i-l*n,(m=Math.hypot(o,u,h))?(o*=m=1/m,u*=m,h*=m):(o=0,u=0,h=0),t[0]=n,t[1]=o,t[2]=c,t[3]=0,t[4]=i,t[5]=u,t[6]=l,t[7]=0,t[8]=s,t[9]=h,t[10]=f,t[11]=0,t[12]=-(n*M+i*v+s*p),t[13]=-(o*M+u*v+h*p),t[14]=-(c*M+l*v+f*p),t[15]=1,t)}function Ge(t,e,r,a){var n=e[0],i=e[1],s=e[2],o=a[0],u=a[1],h=a[2],c=n-r[0],l=i-r[1],f=s-r[2],d=c*c+l*l+f*f;d>0&&(c*=d=1/Math.sqrt(d),l*=d,f*=d);var m=u*f-h*l,M=h*c-o*f,v=o*l-u*c;return(d=m*m+M*M+v*v)>0&&(m*=d=1/Math.sqrt(d),M*=d,v*=d),t[0]=m,t[1]=M,t[2]=v,t[3]=0,t[4]=l*v-f*M,t[5]=f*m-c*v,t[6]=c*M-l*m,t[7]=0,t[8]=c,t[9]=l,t[10]=f,t[11]=0,t[12]=n,t[13]=i,t[14]=s,t[15]=1,t}function Ee(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ue(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Fe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Ce(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Ve(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Ie(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t[6]=e[6]+r[6]*a,t[7]=e[7]+r[7]*a,t[8]=e[8]+r[8]*a,t[9]=e[9]+r[9]*a,t[10]=e[10]+r[10]*a,t[11]=e[11]+r[11]*a,t[12]=e[12]+r[12]*a,t[13]=e[13]+r[13]*a,t[14]=e[14]+r[14]*a,t[15]=e[15]+r[15]*a,t}function Ne(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ye(t,e){var r=t[0],a=t[1],n=t[2],i=t[3],s=t[4],o=t[5],u=t[6],h=t[7],c=t[8],l=t[9],f=t[10],m=t[11],M=t[12],v=t[13],p=t[14],b=t[15],g=e[0],y=e[1],x=e[2],_=e[3],w=e[4],R=e[5],D=e[6],P=e[7],A=e[8],j=e[9],O=e[10],T=e[11],q=e[12],S=e[13],B=e[14],L=e[15];return Math.abs(r-g)<=d*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-y)<=d*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(n-x)<=d*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(i-_)<=d*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-w)<=d*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-R)<=d*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(u-D)<=d*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(h-P)<=d*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(c-A)<=d*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(l-j)<=d*Math.max(1,Math.abs(l),Math.abs(j))&&Math.abs(f-O)<=d*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(m-T)<=d*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(M-q)<=d*Math.max(1,Math.abs(M),Math.abs(q))&&Math.abs(v-S)<=d*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(p-B)<=d*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(b-L)<=d*Math.max(1,Math.abs(b),Math.abs(L))}var Xe=ie,ze=Ce;function Ze(){var t=new m(3);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Qe(t){var e=new m(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ke(t){var e=t[0],r=t[1],a=t[2];return Math.hypot(e,r,a)}function He(t,e,r){var a=new m(3);return a[0]=t,a[1]=e,a[2]=r,a}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Je(t,e,r,a){return t[0]=e,t[1]=r,t[2]=a,t}function Ke(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function $e(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function tr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function er(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function rr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ar(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function nr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function ir(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function sr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function or(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ur(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t}function hr(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return Math.hypot(r,a,n)}function cr(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return r*r+a*a+n*n}function lr(t){var e=t[0],r=t[1],a=t[2];return e*e+r*r+a*a}function fr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function dr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function mr(t,e){var r=e[0],a=e[1],n=e[2],i=r*r+a*a+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Mr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vr(t,e,r){var a=e[0],n=e[1],i=e[2],s=r[0],o=r[1],u=r[2];return t[0]=n*u-i*o,t[1]=i*s-a*u,t[2]=a*o-n*s,t}function pr(t,e,r,a){var n=e[0],i=e[1],s=e[2];return t[0]=n+a*(r[0]-n),t[1]=i+a*(r[1]-i),t[2]=s+a*(r[2]-s),t}function br(t,e,r,a,n,i){var s=i*i,o=s*(2*i-3)+1,u=s*(i-2)+i,h=s*(i-1),c=s*(3-2*i);return t[0]=e[0]*o+r[0]*u+a[0]*h+n[0]*c,t[1]=e[1]*o+r[1]*u+a[1]*h+n[1]*c,t[2]=e[2]*o+r[2]*u+a[2]*h+n[2]*c,t}function gr(t,e,r,a,n,i){var s=1-i,o=s*s,u=i*i,h=o*s,c=3*i*o,l=3*u*s,f=u*i;return t[0]=e[0]*h+r[0]*c+a[0]*l+n[0]*f,t[1]=e[1]*h+r[1]*c+a[1]*l+n[1]*f,t[2]=e[2]*h+r[2]*c+a[2]*l+n[2]*f,t}function yr(t,e){e=e||1;var r=2*M()*Math.PI,a=2*M()-1,n=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=a*e,t}function xr(t,e,r){var a=e[0],n=e[1],i=e[2],s=r[3]*a+r[7]*n+r[11]*i+r[15];return s=s||1,t[0]=(r[0]*a+r[4]*n+r[8]*i+r[12])/s,t[1]=(r[1]*a+r[5]*n+r[9]*i+r[13])/s,t[2]=(r[2]*a+r[6]*n+r[10]*i+r[14])/s,t}function _r(t,e,r){var a=e[0],n=e[1],i=e[2];return t[0]=a*r[0]+n*r[3]+i*r[6],t[1]=a*r[1]+n*r[4]+i*r[7],t[2]=a*r[2]+n*r[5]+i*r[8],t}function wr(t,e,r){var a=r[0],n=r[1],i=r[2],s=r[3],o=e[0],u=e[1],h=e[2],c=n*h-i*u,l=i*o-a*h,f=a*u-n*o,d=n*f-i*l,m=i*c-a*f,M=a*l-n*c,v=2*s;return c*=v,l*=v,f*=v,d*=2,m*=2,M*=2,t[0]=o+c+d,t[1]=u+l+m,t[2]=h+f+M,t}function Rr(t,e,r,a){var n=[],i=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[0],i[1]=n[1]*Math.cos(a)-n[2]*Math.sin(a),i[2]=n[1]*Math.sin(a)+n[2]*Math.cos(a),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function Dr(t,e,r,a){var n=[],i=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[2]*Math.sin(a)+n[0]*Math.cos(a),i[1]=n[1],i[2]=n[2]*Math.cos(a)-n[0]*Math.sin(a),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function Pr(t,e,r,a){var n=[],i=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],i[0]=n[0]*Math.cos(a)-n[1]*Math.sin(a),i[1]=n[0]*Math.sin(a)+n[1]*Math.cos(a),i[2]=n[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function Ar(t,e){var r=t[0],a=t[1],n=t[2],i=e[0],s=e[1],o=e[2],u=Math.sqrt(r*r+a*a+n*n)*Math.sqrt(i*i+s*s+o*o),h=u&&Mr(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}function jr(t){return t[0]=0,t[1]=0,t[2]=0,t}function Or(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Tr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function qr(t,e){var r=t[0],a=t[1],n=t[2],i=e[0],s=e[1],o=e[2];return Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-s)<=d*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))}var Sr,Br=$e,Lr=tr,Gr=er,Er=hr,Ur=cr,Fr=ke,Cr=lr,Vr=(Sr=Ze(),function(t,e,r,a,n,i){var s,o;for(e||(e=3),r||(r=0),o=a?Math.min(a*e+r,t.length):t.length,s=r;s<o;s+=e)Sr[0]=t[s],Sr[1]=t[s+1],Sr[2]=t[s+2],n(Sr,Sr,i),t[s]=Sr[0],t[s+1]=Sr[1],t[s+2]=Sr[2];return t});function Ir(){var t=new m(4);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Nr(t){var e=new m(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Yr(t,e,r,a){var n=new m(4);return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n}function Xr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function zr(t,e,r,a,n){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t}function Zr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Qr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function kr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Hr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Wr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Jr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Kr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function $r(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function ta(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function ea(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function ra(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t}function aa(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2],i=e[3]-t[3];return Math.hypot(r,a,n,i)}function na(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2],i=e[3]-t[3];return r*r+a*a+n*n+i*i}function ia(t){var e=t[0],r=t[1],a=t[2],n=t[3];return Math.hypot(e,r,a,n)}function sa(t){var e=t[0],r=t[1],a=t[2],n=t[3];return e*e+r*r+a*a+n*n}function oa(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ua(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ha(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=r*r+a*a+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=r*s,t[1]=a*s,t[2]=n*s,t[3]=i*s,t}function ca(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function la(t,e,r,a){var n=r[0]*a[1]-r[1]*a[0],i=r[0]*a[2]-r[2]*a[0],s=r[0]*a[3]-r[3]*a[0],o=r[1]*a[2]-r[2]*a[1],u=r[1]*a[3]-r[3]*a[1],h=r[2]*a[3]-r[3]*a[2],c=e[0],l=e[1],f=e[2],d=e[3];return t[0]=l*h-f*u+d*o,t[1]=-c*h+f*s-d*i,t[2]=c*u-l*s+d*n,t[3]=-c*o+l*i-f*n,t}function fa(t,e,r,a){var n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n+a*(r[0]-n),t[1]=i+a*(r[1]-i),t[2]=s+a*(r[2]-s),t[3]=o+a*(r[3]-o),t}function da(t,e){var r,a,n,i,s,o;e=e||1;do{s=(r=2*M()-1)*r+(a=2*M()-1)*a}while(s>=1);do{o=(n=2*M()-1)*n+(i=2*M()-1)*i}while(o>=1);var u=Math.sqrt((1-s)/o);return t[0]=e*r,t[1]=e*a,t[2]=e*n*u,t[3]=e*i*u,t}function ma(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3];return t[0]=r[0]*a+r[4]*n+r[8]*i+r[12]*s,t[1]=r[1]*a+r[5]*n+r[9]*i+r[13]*s,t[2]=r[2]*a+r[6]*n+r[10]*i+r[14]*s,t[3]=r[3]*a+r[7]*n+r[11]*i+r[15]*s,t}function Ma(t,e,r){var a=e[0],n=e[1],i=e[2],s=r[0],o=r[1],u=r[2],h=r[3],c=h*a+o*i-u*n,l=h*n+u*a-s*i,f=h*i+s*n-o*a,d=-s*a-o*n-u*i;return t[0]=c*h+d*-s+l*-u-f*-o,t[1]=l*h+d*-o+f*-s-c*-u,t[2]=f*h+d*-u+c*-o-l*-s,t[3]=e[3],t}function va(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pa(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function ba(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function ga(t,e){var r=t[0],a=t[1],n=t[2],i=t[3],s=e[0],o=e[1],u=e[2],h=e[3];return Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-o)<=d*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))}var ya=Qr,xa=kr,_a=Hr,wa=aa,Ra=na,Da=ia,Pa=sa,Aa=function(){var t=Ir();return function(e,r,a,n,i,s){var o,u;for(r||(r=4),a||(a=0),u=n?Math.min(n*r+a,e.length):e.length,o=a;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],i(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();function ja(){var t=new m(4);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Oa(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ta(t,e,r){r*=.5;var a=Math.sin(r);return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=Math.cos(r),t}function qa(t,e){var r=2*Math.acos(e[3]),a=Math.sin(r/2);return a>d?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=1,t[1]=0,t[2]=0),r}function Sa(t,e){var r=un(t,e);return Math.acos(2*r*r-1)}function Ba(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=a*c+s*o+n*h-i*u,t[1]=n*c+s*u+i*o-a*h,t[2]=i*c+s*h+a*u-n*o,t[3]=s*c-a*o-n*u-i*h,t}function La(t,e,r){r*=.5;var a=e[0],n=e[1],i=e[2],s=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=a*u+s*o,t[1]=n*u+i*o,t[2]=i*u-n*o,t[3]=s*u-a*o,t}function Ga(t,e,r){r*=.5;var a=e[0],n=e[1],i=e[2],s=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=a*u-i*o,t[1]=n*u+s*o,t[2]=i*u+a*o,t[3]=s*u-n*o,t}function Ea(t,e,r){r*=.5;var a=e[0],n=e[1],i=e[2],s=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=a*u+n*o,t[1]=n*u-a*o,t[2]=i*u+s*o,t[3]=s*u-i*o,t}function Ua(t,e){var r=e[0],a=e[1],n=e[2];return t[0]=r,t[1]=a,t[2]=n,t[3]=Math.sqrt(Math.abs(1-r*r-a*a-n*n)),t}function Fa(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=Math.sqrt(r*r+a*a+n*n),o=Math.exp(i),u=s>0?o*Math.sin(s)/s:0;return t[0]=r*u,t[1]=a*u,t[2]=n*u,t[3]=o*Math.cos(s),t}function Ca(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=Math.sqrt(r*r+a*a+n*n),o=s>0?Math.atan2(s,i)/s:0;return t[0]=r*o,t[1]=a*o,t[2]=n*o,t[3]=.5*Math.log(r*r+a*a+n*n+i*i),t}function Va(t,e,r){return Ca(t,e),on(t,t,r),Fa(t,t),t}function Ia(t,e,r,a){var n,i,s,o,u,h=e[0],c=e[1],l=e[2],f=e[3],m=r[0],M=r[1],v=r[2],p=r[3];return(i=h*m+c*M+l*v+f*p)<0&&(i=-i,m=-m,M=-M,v=-v,p=-p),1-i>d?(n=Math.acos(i),s=Math.sin(n),o=Math.sin((1-a)*n)/s,u=Math.sin(a*n)/s):(o=1-a,u=a),t[0]=o*h+u*m,t[1]=o*c+u*M,t[2]=o*l+u*v,t[3]=o*f+u*p,t}function Na(t){var e=M(),r=M(),a=M(),n=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=n*Math.sin(2*Math.PI*r),t[1]=n*Math.cos(2*Math.PI*r),t[2]=i*Math.sin(2*Math.PI*a),t[3]=i*Math.cos(2*Math.PI*a),t}function Ya(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],s=r*r+a*a+n*n+i*i,o=s?1/s:0;return t[0]=-r*o,t[1]=-a*o,t[2]=-n*o,t[3]=i*o,t}function Xa(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function za(t,e){var r,a=e[0]+e[4]+e[8];if(a>0)r=Math.sqrt(a+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);var i=(n+1)%3,s=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*i+i]-e[3*s+s]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*i+s]-e[3*s+i])*r,t[i]=(e[3*i+n]+e[3*n+i])*r,t[s]=(e[3*s+n]+e[3*n+s])*r}return t}function Za(t,e,r,a){var n=.5*Math.PI/180;e*=n,r*=n,a*=n;var i=Math.sin(e),s=Math.cos(e),o=Math.sin(r),u=Math.cos(r),h=Math.sin(a),c=Math.cos(a);return t[0]=i*u*c-s*o*h,t[1]=s*o*c+i*u*h,t[2]=s*u*h-i*o*c,t[3]=s*u*c+i*o*h,t}function Qa(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var ka,Ha,Wa,Ja,Ka,$a,tn=Nr,en=Yr,rn=Xr,an=zr,nn=Zr,sn=Ba,on=ea,un=ca,hn=fa,cn=ia,ln=cn,fn=sa,dn=fn,mn=ha,Mn=ba,vn=ga,pn=(ka=Ze(),Ha=He(1,0,0),Wa=He(0,1,0),function(t,e,r){var a=Mr(e,r);return a<-.999999?(vr(ka,Ha,e),Fr(ka)<1e-6&&vr(ka,Wa,e),mr(ka,ka),Ta(t,ka,Math.PI),t):a>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(vr(ka,e,r),t[0]=ka[0],t[1]=ka[1],t[2]=ka[2],t[3]=1+a,mn(t,t))}),bn=(Ja=ja(),Ka=ja(),function(t,e,r,a,n,i){return Ia(Ja,e,n,i),Ia(Ka,r,a,i),Ia(t,Ja,Ka,2*i*(1-i)),t}),gn=($a=pt(),function(t,e,r,a){return $a[0]=r[0],$a[3]=r[1],$a[6]=r[2],$a[1]=a[0],$a[4]=a[1],$a[7]=a[2],$a[2]=-e[0],$a[5]=-e[1],$a[8]=-e[2],mn(t,za(t,$a))});function yn(){var t=new m(8);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function xn(t){var e=new m(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function _n(t,e,r,a,n,i,s,o){var u=new m(8);return u[0]=t,u[1]=e,u[2]=r,u[3]=a,u[4]=n,u[5]=i,u[6]=s,u[7]=o,u}function wn(t,e,r,a,n,i,s){var o=new m(8);o[0]=t,o[1]=e,o[2]=r,o[3]=a;var u=.5*n,h=.5*i,c=.5*s;return o[4]=u*a+h*r-c*e,o[5]=h*a+c*t-u*r,o[6]=c*a+u*e-h*t,o[7]=-u*t-h*e-c*r,o}function Rn(t,e,r){var a=.5*r[0],n=.5*r[1],i=.5*r[2],s=e[0],o=e[1],u=e[2],h=e[3];return t[0]=s,t[1]=o,t[2]=u,t[3]=h,t[4]=a*h+n*u-i*o,t[5]=n*h+i*s-a*u,t[6]=i*h+a*o-n*s,t[7]=-a*s-n*o-i*u,t}function Dn(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Pn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function An(t,e){var r=ja();_e(r,e);var a=new m(3);return ye(a,e),Rn(t,r,a),t}function jn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function On(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Tn(t,e,r,a,n,i,s,o,u){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=i,t[5]=s,t[6]=o,t[7]=u,t}var qn=rn;function Sn(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Bn=rn;function Ln(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Gn(t,e){var r=e[4],a=e[5],n=e[6],i=e[7],s=-e[0],o=-e[1],u=-e[2],h=e[3];return t[0]=2*(r*h+i*s+a*u-n*o),t[1]=2*(a*h+i*o+n*s-r*u),t[2]=2*(n*h+i*u+r*o-a*s),t}function En(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=.5*r[0],u=.5*r[1],h=.5*r[2],c=e[4],l=e[5],f=e[6],d=e[7];return t[0]=a,t[1]=n,t[2]=i,t[3]=s,t[4]=s*o+n*h-i*u+c,t[5]=s*u+i*o-a*h+l,t[6]=s*h+a*u-n*o+f,t[7]=-a*o-n*u-i*h+d,t}function Un(t,e,r){var a=-e[0],n=-e[1],i=-e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=o*s+c*a+u*i-h*n,f=u*s+c*n+h*a-o*i,d=h*s+c*i+o*n-u*a,m=c*s-o*a-u*n-h*i;return La(t,e,r),a=t[0],n=t[1],i=t[2],s=t[3],t[4]=l*s+m*a+f*i-d*n,t[5]=f*s+m*n+d*a-l*i,t[6]=d*s+m*i+l*n-f*a,t[7]=m*s-l*a-f*n-d*i,t}function Fn(t,e,r){var a=-e[0],n=-e[1],i=-e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=o*s+c*a+u*i-h*n,f=u*s+c*n+h*a-o*i,d=h*s+c*i+o*n-u*a,m=c*s-o*a-u*n-h*i;return Ga(t,e,r),a=t[0],n=t[1],i=t[2],s=t[3],t[4]=l*s+m*a+f*i-d*n,t[5]=f*s+m*n+d*a-l*i,t[6]=d*s+m*i+l*n-f*a,t[7]=m*s-l*a-f*n-d*i,t}function Cn(t,e,r){var a=-e[0],n=-e[1],i=-e[2],s=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=o*s+c*a+u*i-h*n,f=u*s+c*n+h*a-o*i,d=h*s+c*i+o*n-u*a,m=c*s-o*a-u*n-h*i;return Ea(t,e,r),a=t[0],n=t[1],i=t[2],s=t[3],t[4]=l*s+m*a+f*i-d*n,t[5]=f*s+m*n+d*a-l*i,t[6]=d*s+m*i+l*n-f*a,t[7]=m*s-l*a-f*n-d*i,t}function Vn(t,e,r){var a=r[0],n=r[1],i=r[2],s=r[3],o=e[0],u=e[1],h=e[2],c=e[3];return t[0]=o*s+c*a+u*i-h*n,t[1]=u*s+c*n+h*a-o*i,t[2]=h*s+c*i+o*n-u*a,t[3]=c*s-o*a-u*n-h*i,o=e[4],u=e[5],h=e[6],c=e[7],t[4]=o*s+c*a+u*i-h*n,t[5]=u*s+c*n+h*a-o*i,t[6]=h*s+c*i+o*n-u*a,t[7]=c*s-o*a-u*n-h*i,t}function In(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=a*c+s*o+n*h-i*u,t[1]=n*c+s*u+i*o-a*h,t[2]=i*c+s*h+a*u-n*o,t[3]=s*c-a*o-n*u-i*h,o=r[4],u=r[5],h=r[6],c=r[7],t[4]=a*c+s*o+n*h-i*u,t[5]=n*c+s*u+i*o-a*h,t[6]=i*c+s*h+a*u-n*o,t[7]=s*c-a*o-n*u-i*h,t}function Nn(t,e,r,a){if(Math.abs(a)<d)return jn(t,e);var n=Math.hypot(r[0],r[1],r[2]);a*=.5;var i=Math.sin(a),s=i*r[0]/n,o=i*r[1]/n,u=i*r[2]/n,h=Math.cos(a),c=e[0],l=e[1],f=e[2],m=e[3];t[0]=c*h+m*s+l*u-f*o,t[1]=l*h+m*o+f*s-c*u,t[2]=f*h+m*u+c*o-l*s,t[3]=m*h-c*s-l*o-f*u;var M=e[4],v=e[5],p=e[6],b=e[7];return t[4]=M*h+b*s+v*u-p*o,t[5]=v*h+b*o+p*s-M*u,t[6]=p*h+b*u+M*o-v*s,t[7]=b*h-M*s-v*o-p*u,t}function Yn(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function Xn(t,e,r){var a=e[0],n=e[1],i=e[2],s=e[3],o=r[4],u=r[5],h=r[6],c=r[7],l=e[4],f=e[5],d=e[6],m=e[7],M=r[0],v=r[1],p=r[2],b=r[3];return t[0]=a*b+s*M+n*p-i*v,t[1]=n*b+s*v+i*M-a*p,t[2]=i*b+s*p+a*v-n*M,t[3]=s*b-a*M-n*v-i*p,t[4]=a*c+s*o+n*h-i*u+l*b+m*M+f*p-d*v,t[5]=n*c+s*u+i*o-a*h+f*b+m*v+d*M-l*p,t[6]=i*c+s*h+a*u-n*o+d*b+m*p+l*v-f*M,t[7]=s*c-a*o-n*u-i*h+m*b-l*M-f*v-d*p,t}var zn=Xn;function Zn(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var Qn=un;function kn(t,e,r,a){var n=1-a;return Qn(e,r)<0&&(a=-a),t[0]=e[0]*n+r[0]*a,t[1]=e[1]*n+r[1]*a,t[2]=e[2]*n+r[2]*a,t[3]=e[3]*n+r[3]*a,t[4]=e[4]*n+r[4]*a,t[5]=e[5]*n+r[5]*a,t[6]=e[6]*n+r[6]*a,t[7]=e[7]*n+r[7]*a,t}function Hn(t,e){var r=$n(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Wn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Jn=cn,Kn=Jn,$n=fn,ti=$n;function ei(t,e){var r=$n(e);if(r>0){r=Math.sqrt(r);var a=e[0]/r,n=e[1]/r,i=e[2]/r,s=e[3]/r,o=e[4],u=e[5],h=e[6],c=e[7],l=a*o+n*u+i*h+s*c;t[0]=a,t[1]=n,t[2]=i,t[3]=s,t[4]=(o-a*l)/r,t[5]=(u-n*l)/r,t[6]=(h-i*l)/r,t[7]=(c-s*l)/r}return t}function ri(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ai(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ni(t,e){var r=t[0],a=t[1],n=t[2],i=t[3],s=t[4],o=t[5],u=t[6],h=t[7],c=e[0],l=e[1],f=e[2],m=e[3],M=e[4],v=e[5],p=e[6],b=e[7];return Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-l)<=d*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-m)<=d*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-M)<=d*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-v)<=d*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-p)<=d*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(h-b)<=d*Math.max(1,Math.abs(h),Math.abs(b))}function ii(){var t=new m(2);return m!=Float32Array&&(t[0]=0,t[1]=0),t}function si(t){var e=new m(2);return e[0]=t[0],e[1]=t[1],e}function oi(t,e){var r=new m(2);return r[0]=t,r[1]=e,r}function ui(t,e){return t[0]=e[0],t[1]=e[1],t}function hi(t,e,r){return t[0]=e,t[1]=r,t}function ci(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function li(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function fi(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function di(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function mi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Mi(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function vi(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function pi(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function bi(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function gi(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function yi(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t}function xi(t,e){var r=e[0]-t[0],a=e[1]-t[1];return Math.hypot(r,a)}function _i(t,e){var r=e[0]-t[0],a=e[1]-t[1];return r*r+a*a}function wi(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function Ri(t){var e=t[0],r=t[1];return e*e+r*r}function Di(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Pi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Ai(t,e){var r=e[0],a=e[1],n=r*r+a*a;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}function ji(t,e){return t[0]*e[0]+t[1]*e[1]}function Oi(t,e,r){var a=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=a,t}function Ti(t,e,r,a){var n=e[0],i=e[1];return t[0]=n+a*(r[0]-n),t[1]=i+a*(r[1]-i),t}function qi(t,e){e=e||1;var r=2*M()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Si(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[2]*n,t[1]=r[1]*a+r[3]*n,t}function Bi(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[2]*n+r[4],t[1]=r[1]*a+r[3]*n+r[5],t}function Li(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[3]*n+r[6],t[1]=r[1]*a+r[4]*n+r[7],t}function Gi(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[4]*n+r[12],t[1]=r[1]*a+r[5]*n+r[13],t}function Ei(t,e,r,a){var n=e[0]-r[0],i=e[1]-r[1],s=Math.sin(a),o=Math.cos(a);return t[0]=n*o-i*s+r[0],t[1]=n*s+i*o+r[1],t}function Ui(t,e){var r=t[0],a=t[1],n=e[0],i=e[1],s=Math.sqrt(r*r+a*a)*Math.sqrt(n*n+i*i),o=s&&(r*n+a*i)/s;return Math.acos(Math.min(Math.max(o,-1),1))}function Fi(t){return t[0]=0,t[1]=0,t}function Ci(t){return"vec2("+t[0]+", "+t[1]+")"}function Vi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ii(t,e){var r=t[0],a=t[1],n=e[0],i=e[1];return Math.abs(r-n)<=d*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(a-i)<=d*Math.max(1,Math.abs(a),Math.abs(i))}var Ni=wi,Yi=li,Xi=fi,zi=di,Zi=xi,Qi=_i,ki=Ri,Hi=function(){var t=ii();return function(e,r,a,n,i,s){var o,u;for(r||(r=2),a||(a=0),u=n?Math.min(n*r+a,e.length):e.length,o=a;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],i(t,t,s),e[o]=t[0],e[o+1]=t[1];return e}}()},379:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const a=r(612),n=r(934);e.App=class{constructor(t){this.run=()=>{this.scene.update(),this.renderer.render(this.scene.get_renderables()),requestAnimationFrame(this.run)},this.canvas=t,this.renderer=new a.Renderer(t),this.renderer.Initialize(),this.scene=new n.Scene}handle_mouse_move(t){this.scene.subject.rotateY(t.movementX/3)}}},934:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;const a=r(419),n=r(419),i=r(887);e.Scene=class{constructor(){this.object_data=new Float32Array(16384),this.subject=new n.Subject([0,0,-2]),this.subject.set_eulers([90,60,0]),this.player=new a.Camera([-8,0,3.7],0,0)}update(){var t=0;this.subject.rotateY(-.75),this.subject.update();for(var e=this.subject.get_model(),r=0;r<16;r++)this.object_data[16*t+r]=e.at(r);t++,this.player.update()}get_player(){return this.player}get_renderables(){return{view_transform:this.player.get_view(),model_transforms:this.object_data,light_position:i.vec3.create(),object_counts:{0:0,1:0}}}}},612:function(t,e,r){var a=this&&this.__awaiter||function(t,e,r,a){return new(r||(r=Promise))((function(n,i){function s(t){try{u(a.next(t))}catch(t){i(t)}}function o(t){try{u(a.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((a=a.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;const i=n(r(427)),s=r(419),o=r(419),u=r(887),h=r(419);e.Renderer=class{constructor(t){this.canvas=t,this.frameWidth=this.canvas.clientWidth,this.frameHeight=this.canvas.clientHeight}Initialize(){return a(this,void 0,void 0,(function*(){yield this.setupDevice(),yield this.makeBindGroupLayouts(),yield this.createAssets(),yield this.makeDepthBufferResources(),yield this.makePipeline(),yield this.makeBindGroup()}))}setupDevice(){var t,e;return a(this,void 0,void 0,(function*(){this.adapter=yield null===(t=navigator.gpu)||void 0===t?void 0:t.requestAdapter(),this.device=yield null===(e=this.adapter)||void 0===e?void 0:e.requestDevice(),this.context=this.canvas.getContext("webgpu"),this.format="bgra8unorm",this.context.configure({device:this.device,format:this.format,alphaMode:"opaque"})}))}makeDepthBufferResources(){return a(this,void 0,void 0,(function*(){this.depthStencilState={format:"depth24plus-stencil8",depthWriteEnabled:!0,depthCompare:"less-equal"};const t={size:{width:this.canvas.clientWidth*(window.devicePixelRatio||1),height:this.canvas.clientHeight*(window.devicePixelRatio||1),depthOrArrayLayers:1},format:"depth24plus-stencil8",usage:GPUTextureUsage.RENDER_ATTACHMENT};this.depthStencilBuffer=this.device.createTexture(t),this.depthStencilView=this.depthStencilBuffer.createView({format:"depth24plus-stencil8",dimension:"2d",aspect:"all"}),this.depthStencilAttachment={view:this.depthStencilView,depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store",stencilLoadOp:"clear",stencilStoreOp:"discard"}}))}makeBindGroupLayouts(){return a(this,void 0,void 0,(function*(){this.frameGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{}}]}),this.materialGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{}}]})}))}makePipeline(){return a(this,void 0,void 0,(function*(){const t=this.device.createPipelineLayout({bindGroupLayouts:[this.frameGroupLayout,this.materialGroupLayout]});this.pipeline=this.device.createRenderPipeline({vertex:{module:this.device.createShaderModule({code:i.default}),entryPoint:"vs_main",buffers:[this.triangleMesh.bufferLayout]},fragment:{module:this.device.createShaderModule({code:i.default}),entryPoint:"fs_main",targets:[{format:this.format}]},primitive:{topology:"triangle-list"},layout:t,depthStencil:this.depthStencilState})}))}createAssets(){return a(this,void 0,void 0,(function*(){this.subjectMesh=new s.ObjMesh,this.triangleMesh=new o.TriangleMesh(this.device),yield this.subjectMesh.initialize(this.device,"./dist/obj/UTAHPOT_POT.obj"),this.material=new h.Material,this.uniformBuffer=this.device.createBuffer({size:140,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});const t={size:65536,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST};this.objectBuffer=this.device.createBuffer(t),yield this.material.initialize(this.device,"./dist/obj/pot_color_copy.png",this.materialGroupLayout)}))}makeBindGroup(){return a(this,void 0,void 0,(function*(){this.frameBindGroup=this.device.createBindGroup({layout:this.frameGroupLayout,entries:[{binding:0,resource:{buffer:this.uniformBuffer}},{binding:1,resource:{buffer:this.objectBuffer}},{binding:2,resource:{buffer:this.uniformBuffer}}]})}))}render(t){return a(this,void 0,void 0,(function*(){if(!this.device||!this.pipeline)return;const e=window.devicePixelRatio,r=this.canvas.clientWidth*e,a=this.canvas.clientHeight*e;this.canvas.width===r&&this.canvas.height===a||(this.canvas.width=r,this.canvas.height=a,this.depthStencilBuffer.destroy(),yield this.makeDepthBufferResources());const n=u.mat4.create();u.mat4.perspective(n,Math.PI/4,this.canvas.width/this.canvas.height,.1,100);const i=t.view_transform;this.device.queue.writeBuffer(this.objectBuffer,0,t.model_transforms,0,t.model_transforms.length),this.device.queue.writeBuffer(this.uniformBuffer,0,i),this.device.queue.writeBuffer(this.uniformBuffer,64,n);const s=this.device.createCommandEncoder(),o=this.context.getCurrentTexture().createView(),h=s.beginRenderPass({colorAttachments:[{view:o,clearValue:{r:.75,g:.75,b:.75,a:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:this.depthStencilAttachment});h.setPipeline(this.pipeline),h.setBindGroup(0,this.frameBindGroup);var c=0;h.setVertexBuffer(0,this.subjectMesh.buffer),h.setBindGroup(1,this.material.bindGroup),h.draw(this.subjectMesh.vertexCount,1,0,c),c+=1,h.end(),this.device.queue.submit([s.finish()])}))}}},427:(t,e,r)=>{r.r(e),r.d(e,{default:()=>a});const a="struct TransformData {\r\n    view: mat4x4<f32>,\r\n    projection: mat4x4<f32>,\r\n};\r\n\r\nstruct ObjectData {\r\n    model: array<mat4x4<f32>>,\r\n};\r\n\r\n\r\n@binding(0) @group(0) var<uniform> transformUBO: TransformData;\r\n@binding(1) @group(0) var<storage, read> objects: ObjectData;\r\n@binding(0) @group(1) var myTexture: texture_2d<f32>;\r\n@binding(1) @group(1) var mySampler: sampler;\r\n\r\nstruct Fragment {\r\n    @builtin(position) Position : vec4<f32>,\r\n    @location(0) VPos : vec4<f32>,\r\n    @location(1) VTexCoord : vec2<f32>,\r\n    @location(2) VNormals : vec3<f32>\r\n};\r\n\r\n@vertex\r\nfn vs_main(\r\n    @builtin(instance_index) ID: u32,\r\n    @location(0) vertexPostion: vec3<f32>, \r\n    @location(1) vertexTexCoord: vec2<f32>,\r\n    @location(2) vertexNormals: vec3<f32> ) -> Fragment {\r\n\r\n    var output : Fragment;\r\n    output.Position = transformUBO.projection * transformUBO.view * objects.model[ID] * vec4<f32>(vertexPostion, 1.0);\r\n    output.VPos = objects.model[ID] * vec4<f32>(vertexPostion, 1.0);\r\n    output.VTexCoord = vertexTexCoord;\r\n    output.VNormals = vertexNormals;\r\n\r\n    return output;\r\n}\r\n\r\n@fragment\r\nfn fs_main(fragData: Fragment) -> @location(0) vec4<f32> {\r\n\r\n    let baseColor = textureSample(myTexture, mySampler, fragData.VTexCoord);\r\n    return baseColor;\r\n    \r\n}"},419:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TriangleMesh=e.QuadMesh=e.ObjMesh=e.Material=e.Triangle=e.Subject=e.Quad=e.Deg2Rad=e.Light=e.object_types=e.Camera=void 0;var a=r(3);Object.defineProperty(e,"Camera",{enumerable:!0,get:function(){return a.Camera}});var n=r(368);Object.defineProperty(e,"object_types",{enumerable:!0,get:function(){return n.object_types}});var i=r(500);Object.defineProperty(e,"Light",{enumerable:!0,get:function(){return i.Light}});var s=r(336);Object.defineProperty(e,"Deg2Rad",{enumerable:!0,get:function(){return s.Deg2Rad}});var o=r(817);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return o.Quad}});var u=r(268);Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return u.Subject}});var h=r(190);Object.defineProperty(e,"Triangle",{enumerable:!0,get:function(){return h.Triangle}});var c=r(929);Object.defineProperty(e,"Material",{enumerable:!0,get:function(){return c.Material}});var l=r(770);Object.defineProperty(e,"ObjMesh",{enumerable:!0,get:function(){return l.ObjMesh}});var f=r(964);Object.defineProperty(e,"QuadMesh",{enumerable:!0,get:function(){return f.QuadMesh}});var d=r(971);Object.defineProperty(e,"TriangleMesh",{enumerable:!0,get:function(){return d.TriangleMesh}})},3:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;const a=r(887),n=r(336);e.Camera=class{constructor(t,e,r){this.position=t,this.eulers=a.vec3.create(),this.view=a.mat4.create(),this.forwards=a.vec3.create(),this.right=a.vec3.create(),this.up=a.vec3.create()}update(){this.forwards=[Math.cos((0,n.Deg2Rad)(this.eulers[2]))*Math.cos((0,n.Deg2Rad)(this.eulers[1])),Math.sin((0,n.Deg2Rad)(this.eulers[2]))*Math.cos((0,n.Deg2Rad)(this.eulers[1])),Math.sin((0,n.Deg2Rad)(this.eulers[1]))],a.vec3.cross(this.right,this.forwards,[0,0,1]),a.vec3.cross(this.up,this.right,this.forwards);const t=a.vec3.create();a.vec3.add(t,this.position,this.forwards),this.view=a.mat4.create(),a.mat4.lookAt(this.view,this.position,t,this.up)}get_view(){return this.view}set_position(t){this.position=t,this.update()}get_position(){return this.position}set_eulers(t){this.eulers=t,this.update()}get_eulers(){return this.eulers}spin_camera(t,e){this.eulers[2]-=t,this.eulers[2]%=360,this.eulers[1]=Math.min(89,Math.max(-89,this.eulers[1]-e))}move_camera(t,e,r){a.vec3.scaleAndAdd(this.position,this.position,this.forwards,t),a.vec3.scaleAndAdd(this.position,this.position,this.right,e),a.vec3.scaleAndAdd(this.position,this.position,this.up,r)}}},368:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.object_types=void 0,function(t){t[t.TRIANGLE=0]="TRIANGLE",t[t.QUAD=1]="QUAD"}(r||(e.object_types=r={}))},500:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Light=void 0;const a=r(887),n=r(336);e.Light=class{constructor(t){this.position=t,this.eulers=a.vec3.create(),this.forwards=a.vec3.create(),this.right=a.vec3.create(),this.up=a.vec3.create()}update(){this.forwards=[Math.cos((0,n.Deg2Rad)(this.eulers[2]))*Math.cos((0,n.Deg2Rad)(this.eulers[1])),Math.sin((0,n.Deg2Rad)(this.eulers[2]))*Math.cos((0,n.Deg2Rad)(this.eulers[1])),Math.sin((0,n.Deg2Rad)(this.eulers[1]))],a.vec3.cross(this.right,this.forwards,[0,0,1]),a.vec3.cross(this.up,this.right,this.forwards)}set_position(t){this.position=t,this.update()}get_position(){return this.position}set_eulers(t){this.eulers=t,this.update()}get_eulers(){return this.eulers}move_light(t,e,r){a.vec3.scaleAndAdd(this.position,this.position,this.forwards,t),a.vec3.scaleAndAdd(this.position,this.position,this.right,e),a.vec3.scaleAndAdd(this.position,this.position,this.up,r)}}},336:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Deg2Rad=void 0,e.Deg2Rad=function(t){return t*Math.PI/180}},817:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Quad=void 0;const a=r(887),n=r(336);e.Quad=class{constructor(t){this.position=t,this.model=a.mat4.create(),this.eulers=a.vec3.create()}update(){this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position)}get_model(){return this.model}set_position(t){this.position=t,this.update()}get_position(){return this.position}set_eulers(t){this.eulers=t,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}get_eulers(){return this.eulers}rotateX(t){this.eulers[0]+=t,this.eulers[0]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}rotateY(t){this.eulers[1]+=t,this.eulers[1]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}rotateZ(t){this.eulers[2]+=t,this.eulers[2]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}}},268:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Subject=void 0;const a=r(887),n=r(336);e.Subject=class{constructor(t){this.position=t,this.eulers=a.vec3.create(),this.model=a.mat4.create()}update(){this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}get_model(){return this.model}set_position(t){this.position=t,this.update()}get_position(){return this.position}set_eulers(t){this.eulers=t,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}get_eulers(){return this.eulers}rotateX(t){this.eulers[0]+=t,this.eulers[0]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}rotateY(t){this.eulers[1]+=t,this.eulers[1]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}rotateZ(t){this.eulers[2]+=t,this.eulers[2]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}}},190:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Triangle=void 0;const a=r(887),n=r(336);e.Triangle=class{constructor(t){this.position=t,this.eulers=a.vec3.create(),this.model=a.mat4.create()}update(){this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position)}get_model(){return this.model}set_position(t){this.position=t,this.update()}get_position(){return this.position}set_eulers(t){this.eulers=t,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}get_eulers(){return this.eulers}rotateX(t){this.eulers[0]+=t,this.eulers[0]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}rotateY(t){this.eulers[1]+=t,this.eulers[1]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}rotateZ(t){this.eulers[2]+=t,this.eulers[2]%=360,this.model=a.mat4.create(),a.mat4.translate(this.model,this.model,this.position),a.mat4.rotateX(this.model,this.model,(0,n.Deg2Rad)(this.eulers[0])),a.mat4.rotateY(this.model,this.model,(0,n.Deg2Rad)(this.eulers[1])),a.mat4.rotateZ(this.model,this.model,(0,n.Deg2Rad)(this.eulers[2]))}}},929:function(t,e){var r=this&&this.__awaiter||function(t,e,r,a){return new(r||(r=Promise))((function(n,i){function s(t){try{u(a.next(t))}catch(t){i(t)}}function o(t){try{u(a.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Material=void 0,e.Material=class{initialize(t,e,a){return r(this,void 0,void 0,(function*(){const r=yield fetch(e),n=yield r.blob(),i=yield createImageBitmap(n);if(yield this.loadImageBitmap(t,i),void 0===this.texture)throw new Error("Texture is not initialized.");this.view=this.texture.createView({format:"rgba8unorm",dimension:"2d",aspect:"all",baseMipLevel:0,mipLevelCount:1,baseArrayLayer:0,arrayLayerCount:1}),this.sampler=t.createSampler({addressModeU:"repeat",addressModeV:"repeat",magFilter:"linear",minFilter:"nearest",mipmapFilter:"nearest",maxAnisotropy:1}),this.bindGroup=t.createBindGroup({layout:a,entries:[{binding:0,resource:this.view},{binding:1,resource:this.sampler}]})}))}loadImageBitmap(t,e){return r(this,void 0,void 0,(function*(){const r={size:{width:e.width,height:e.height},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT};this.texture=t.createTexture(r),t.queue.copyExternalImageToTexture({source:e},{texture:this.texture},r.size)}))}}},770:function(t,e){var r=this&&this.__awaiter||function(t,e,r,a){return new(r||(r=Promise))((function(n,i){function s(t){try{u(a.next(t))}catch(t){i(t)}}function o(t){try{u(a.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ObjMesh=void 0,e.ObjMesh=class{constructor(){this.v=[],this.vt=[],this.vn=[]}initialize(t,e){return r(this,void 0,void 0,(function*(){if(yield this.readFile(e),void 0===this.vertices)throw new Error("Vertices are not initialized.");this.vertexCount=this.vertices.length/8;const r=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,a={size:this.vertices.byteLength,usage:r,mappedAtCreation:!0};this.buffer=t.createBuffer(a),new Float32Array(this.buffer.getMappedRange()).set(this.vertices),this.buffer.unmap(),this.bufferLayout={arrayStride:32,attributes:[{shaderLocation:0,format:"float32x3",offset:0},{shaderLocation:1,format:"float32x2",offset:12},{shaderLocation:2,format:"float32x3",offset:20}]}}))}readFile(t){return r(this,void 0,void 0,(function*(){const e=[],r=yield fetch(t),a=yield r.blob();(yield a.text()).split("\n").forEach((t=>{"v"==t[0]&&" "==t[1]?this.read_vertex_data(t):"v"==t[0]&&"t"==t[1]?this.read_texcoord_data(t):"v"==t[0]&&"n"==t[1]?this.read_normal_data(t):"f"==t[0]&&this.read_face_data(t,e)})),this.vertices=new Float32Array(e)}))}read_vertex_data(t){const e=t.split(" "),r=[Number(e[1]).valueOf(),Number(e[2]).valueOf(),Number(e[3]).valueOf()];this.v.push(r)}read_texcoord_data(t){const e=t.split(" "),r=[Number(e[1]).valueOf(),Number(e[2]).valueOf()];this.vt.push(r)}read_normal_data(t){const e=t.split(" "),r=[Number(e[1]).valueOf(),Number(e[2]).valueOf(),Number(e[3]).valueOf()];this.vn.push(r)}read_face_data(t,e){const r=(t=t.replace("\n","")).split(" "),a=r.length-3;for(let t=0;t<a;t++)this.read_corner(r[1],e),this.read_corner(r[2+t],e),this.read_corner(r[3+t],e)}read_corner(t,e){const r=t.split("/"),a=this.v[Number(r[0]).valueOf()-1],n=this.vt[Number(r[1]).valueOf()-1],i=this.vn[Number(r[2]).valueOf()-1];e.push(a[0]),e.push(a[1]),e.push(a[2]),e.push(n[0]),e.push(n[1]),e.push(i[0]),e.push(i[1]),e.push(i[2])}}},964:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.QuadMesh=void 0,e.QuadMesh=class{constructor(t){const e=new Float32Array([-.5,-.5,0,0,0,0,0,0,.5,-.5,0,1,0,0,0,0,.5,.5,0,1,1,0,0,0,.5,.5,0,1,1,0,0,0,-.5,.5,0,0,1,0,0,0,-.5,-.5,0,0,0,0,0,0]),r=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,a={size:e.byteLength,usage:r,mappedAtCreation:!0};this.buffer=t.createBuffer(a),new Float32Array(this.buffer.getMappedRange()).set(e),this.buffer.unmap(),this.bufferLayout={arrayStride:32,attributes:[{shaderLocation:0,format:"float32x3",offset:0},{shaderLocation:1,format:"float32x2",offset:12},{shaderLocation:2,format:"float32x3",offset:20}]}}}},971:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TriangleMesh=void 0,e.TriangleMesh=class{constructor(t){const e=new Float32Array([0,0,.5,.5,0,0,0,0,0,-.5,-.5,0,1,0,0,0,0,.5,-.5,1,1,0,0,0]),r=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,a={size:e.byteLength,usage:r,mappedAtCreation:!0};this.buffer=t.createBuffer(a),new Float32Array(this.buffer.getMappedRange()).set(e),this.buffer.unmap(),this.bufferLayout={arrayStride:32,attributes:[{shaderLocation:0,format:"float32x3",offset:0},{shaderLocation:1,format:"float32x2",offset:12},{shaderLocation:2,format:"float32x3",offset:20}]}}}}},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,r),i.exports}r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=r(379);for(let e=1;e<=20;e++){const r=document.getElementById(e.toString());new t.App(r).run()}})()})();
//# sourceMappingURL=main.bundle.js.map